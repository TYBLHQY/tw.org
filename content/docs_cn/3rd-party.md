---
title: "Taskwarrior - 第三方应用程序指南"
---

# 第三方应用程序指南

Taskwarrior 可以通过第三方应用程序进行扩展，该应用程序可以是包装器或 hook 脚本。
有脚本示例的导入和导出附加组件，支持许多格式（克隆存储库，在 `taskwarrior.git/scripts/add-ons` 中查看）。
然后还有更复杂的应用程序，如 [Vit](https://gothenburgbitfactory.org/projects/vit/) 提供完整的替代 UI。

所有这些都提供有趣的新功能并改善不同类型用户的易用性。
我们鼓励您创建这样的附加组件，但在这样做时，必须遵循一些规则，这不仅会保护用户的数据免受虐待，还会保护您的应用程序不会对 Taskwarrior 中的更改敏感。

## 规则

- 正确生成、使用和处理 UTF8 文本。
  UTF8 是 Taskwarrior 唯一支持的文本编码。
- 不要尝试读取数据库。
  原因是：数据库格式可能在未来版本中更改，数据库中的表之间存在必须维护的重要关系，否则任务可能会损坏。
  您本质上是在重写 Taskwarrior 的数据访问和配置部分，这是一项重大工作。
  为了支持过滤器，您还需要评估支持的子句、提供 DOM 访问并实现别名。
- 使用 `export` 命令从 Taskwarrior 查询数据。
  `export` 命令实现可以使用的过滤器，或者您可以省略过滤器，获取所有数据，并实现自己的过滤。
  JSON 解析在所有相关编程语言中都很好地支持，这意味着您应该使用 Taskwarrior 本身来查询数据，结合商品 JSON 解析器。
  虽然 JSON 格式会随着时间的推移而调整，但通常形式不会。
- 从版本 {{< label >}}2.4.5{{< /label >}} 开始，使用 `import` 命令将修改后的 JSON 导入回 Taskwarrior。
- 较早的版本：使用命令行接口将数据放入 Taskwarrior。
  编写有效的命令行是将数据放入 Taskwarrior 的简单方法。
- 使用 `_get` 帮助程序命令访问单个数据项。
  请注意，可以通过一个命令检索多个项目。
  如果访问的项目不止几个，请使用 `export` 命令。
- 通过运行 `task --version` 验证功能支持
  此命令返回版本号，这将帮助您确定是否支持特定功能。
  请注意，此命令不会扫描配置文件，因此如果尚未设置 Taskwarrior，可以安全运行。
- UDAs（用户定义属性）必须保留在数据中。
  读取任务的 JSON 时，可能存在您从未见过的属性。
  如果是这样，您不得以任何方式修改它们。
  这不仅使您的应用程序面向未来，而且允许它容纳来自其他数据源的 UDAs。

## 指南

- 如果您需要存储其他数据，请考虑将其放在 `~/.task` 目录中。
- 有许多帮助程序命令旨在协助附加脚本（如 shell 完成脚本）。
  这些命令都以下划线开头，用此命令查看它们：`task help | grep ' _'`。
- 熟悉强制启用或关闭颜色、禁用换行、禁用批量操作限制、禁用确认、禁用重建工作集、修改详细程度等方式。
  有办法绕过几乎所有的限制，虽然这对普通用户没有意义，但对附加组件作者来说可能至关重要。
